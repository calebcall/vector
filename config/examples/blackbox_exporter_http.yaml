# Blackbox Exporter HTTP probing example with optional labels
# ------------------------------------------------------------------------------
# Scraping metrics from Blackbox Exporter HTTP probes and sending to console
# This example demonstrates using predefined optional labels to enrich metrics
# with geographic and infrastructure context

data_dir: "/var/lib/vector"

# Ingest
sources:
  blackbox_http:
    type: "blackbox_exporter"
    # URL of the Blackbox Exporter instance
    url: "http://localhost:9115"
    # Targets to probe
    targets:
      - "https://example.com"
      - "https://www.google.com"
      - "https://github.com"
    # Module to use for probing (must be defined in Blackbox Exporter config)
    module: "http_2xx"
    # Scrape interval in seconds
    scrape_interval_secs: 15
    # Scrape timeout in seconds
    scrape_timeout_secs: 10
    # Optional labels to enrich all metrics with contextual information
    # Geohash of the probe location
    geohash: "9qx7hh9jd"
    # Probe region (e.g., AMER, EMEA, APAC)
    region: "AMER"
    # Probe location (city or location name)
    location: "Oregon"
    # Two-digit country code
    country: "US"
    # Check friendly name
    name: "Public Sites Monitor"
    # Infrastructure provider
    provider: "AWS"

# Output
sinks:
  console:
    inputs: ["blackbox_http"]
    type: "console"
    encoding:
      codec: "json"
